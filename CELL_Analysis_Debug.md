# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º CELL

## üêõ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ

–ü—Ä–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º CELL —Å–ø—Ä–∞–≤–∞ –æ—Å—Ç–∞–µ—Ç—Å—è **–±–æ–ª—å—à–∞—è —á–µ—Ä–Ω–∞—è –ø–æ–ª–æ—Å–∞** (~30% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞).

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞

### –®–∞–≥ 1: –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤

```kotlin
// –î–ª—è —ç–∫—Ä–∞–Ω–∞ 360dp:
val maxCharsByScreenWidth = (screenWidth / 2.5f).toInt()
                          = (360 / 2.5).toInt() 
                          = 144 —Å–∏–º–≤–æ–ª–∞

val maxSymbolsWidthCalculated = minOf(300, 144) = 144

// –ü—Ä–∏ CELL = 100:
val charsPerRow = (60 + (144 - 60) √ó 1.0).toInt()
                = 144 —Å–∏–º–≤–æ–ª–∞
```

### –®–∞–≥ 2: –†–∞—Å—á–µ—Ç fontSize

```kotlin
val maxFontSizeByWidth = screenWidth / charsPerRow / charWidthFactor
                       = 360 / 144 / 0.56
                       = 4.46sp

val safeFontSize = 4.46 √ó 0.98 = 4.37sp

// –ù–û! –ï—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:
val result = safeFontSize.coerceIn(2f, 20f)
```

### –®–∞–≥ 3: –†–µ–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞

```kotlin
// –ï—Å–ª–∏ fontSize –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –º–∏–Ω–∏–º—É–º–æ–º 2sp:
–†–µ–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ = charsPerRow √ó fontSize √ó charWidthFactor
                = 144 √ó 2 √ó 0.56
                = 161dp

// –ü—Ä–∏ —ç–∫—Ä–∞–Ω–µ 360dp:
–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ = 161 / 360 = 44.7% ‚ùå
–ß–µ—Ä–Ω–∞—è –ø–æ–ª–æ—Å–∞ = 360 - 161 = 199dp (55%) ‚ùå‚ùå‚ùå
```

## üéØ –ù–∞–π–¥–µ–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞!

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π fontSize = 2sp

```kotlin
return safeFontSize.coerceIn(2f, 20f)  // ‚ùå –ú–∏–Ω–∏–º—É–º 2sp
```

–ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–∏–º–≤–æ–ª–æ–≤ (144+) fontSize –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ 2sp, –Ω–æ –æ–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω!

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–∫—Å—Ç –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —ç–∫—Ä–∞–Ω, –æ—Å—Ç–∞–µ—Ç—Å—è —á–µ—Ä–Ω–∞—è –ø–æ–ª–æ—Å–∞.

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç maxCharsByScreenWidth

```kotlin
val maxCharsByScreenWidth = (screenWidth / 2.5f).toInt()
```

–≠—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–∏–º–≤–æ–ª–∞ 2.5sp, –Ω–æ:
- –ï—Å–ª–∏ fontSize = 2sp (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ), —Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å–∏–º–≤–æ–ª–∞ = 2 √ó 0.56 = 1.12dp
- –ú—ã –º–æ–∂–µ–º –ø–æ–º–µ—Å—Ç–∏—Ç—å: 360 / 1.12 = 321 —Å–∏–º–≤–æ–ª!

**–ù–æ —Å–µ–π—á–∞—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** —Ç–æ–ª—å–∫–æ 144 —Å–∏–º–≤–æ–ª–∞

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: —á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

### –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
```
CELL = 100:
‚îú‚îÄ maxCharsByScreenWidth = 360 / 2.5 = 144
‚îú‚îÄ charsPerRow = 144
‚îú‚îÄ calculatedFontSize = 4.37sp ‚Üí –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ 2sp
‚îú‚îÄ realWidth = 144 √ó 2 √ó 0.56 = 161dp
‚îî‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: 44.7% ‚ùå

–ü—Ä–æ–±–ª–µ–º–∞: fontSize –æ–≥—Ä–∞–Ω–∏—á–µ–Ω, –Ω–æ —Å–∏–º–≤–æ–ª–æ–≤ –º–∞–ª–æ!
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–ß–¢–û –ù–ê–î–û):
```
CELL = 100:
‚îú‚îÄ –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π fontSize = 1sp (–∏–ª–∏ 1.5sp)
‚îú‚îÄ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ fontSize:
‚îÇ   maxCharsPerRow = screenWidth / (minFontSize √ó charWidthFactor)
‚îÇ                  = 360 / (1 √ó 0.56)
‚îÇ                  = 643 —Å–∏–º–≤–æ–ª–∞ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑—É–º–Ω—ã–º –º–∞–∫—Å–∏–º—É–º–æ–º: 300 —Å–∏–º–≤–æ–ª–æ–≤
‚îú‚îÄ charsPerRow = 300
‚îú‚îÄ fontSize = 360 / 300 / 0.56 √ó 0.98 = 2.1sp
‚îú‚îÄ realWidth = 300 √ó 2.1 √ó 0.56 = 353dp
‚îî‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: 98% ‚úÖ
```

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –£–±—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ fontSize

```kotlin
// –ë—ã–ª–æ:
return safeFontSize.coerceIn(2f, 20f)

// –°—Ç–∞–ª–æ:
return safeFontSize.coerceIn(1f, 20f)  // –ú–∏–Ω–∏–º—É–º 1sp –≤–º–µ—Å—Ç–æ 2sp
```

**–ü–ª—é—Å—ã:** –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ  
**–ú–∏–Ω—É—Å—ã:** –ü—Ä–∏ 1sp —Å–∏–º–≤–æ–ª—ã –±—É–¥—É—Ç –æ—á–µ–Ω—å –º–µ–ª–∫–∏–º–∏

### –†–µ—à–µ–Ω–∏–µ 2: –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç maxCharsByScreenWidth (–õ–£–ß–®–ï!)

```kotlin
// –ë—ã–ª–æ:
val maxCharsByScreenWidth = (screenWidth / 2.5f).toInt()

// –°—Ç–∞–ª–æ:
val minAllowedFontSize = 1.5f  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑—É–º–Ω—ã–π fontSize
val maxCharsByScreenWidth = (screenWidth / (minAllowedFontSize √ó charWidthFactor)).toInt()
                          = (360 / (1.5 √ó 0.56)).toInt()
                          = (360 / 0.84).toInt()
                          = 428
```

–ó–∞—Ç–µ–º –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑—É–º–Ω—ã–º –º–∞–∫—Å–∏–º—É–º–æ–º:
```kotlin
val maxSymbolsWidthCalculated = minOf(maxSymbolsWidth, maxCharsByScreenWidth)
                              = minOf(300, 428)
                              = 300 ‚úÖ
```

### –†–µ—à–µ–Ω–∏–µ 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ fontSize (–û–ü–¢–ò–ú–ê–õ–¨–ù–û!)

```kotlin
fun convertToASCII(...) {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ–ø—É—Å—Ç–∏–º—ã–π fontSize
    val minFontSize = 1.5f
    
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è minFontSize
    val maxCharsByWidth = (screenWidth / (minFontSize √ó 0.56)).toInt()
    val maxCharsByHeight = (screenHeight / (minFontSize √ó 1.15)).toInt()
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ä–∞–∑—É–º–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    val maxSymbolsWidthCalculated = minOf(300, maxCharsByWidth)
    val maxSymbolsHeightCalculated = minOf(200, maxCharsByHeight)
    
    // –û—Å—Ç–∞–ª—å–Ω–æ–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ...
    val charsPerRow = (60 + (maxSymbolsWidthCalculated - 60) √ó cellPercent).toInt()
    val rowsCount = (40 + (maxSymbolsHeightCalculated - 40) √ó cellPercent).toInt()
    
    // fontSize –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
    val fontSize = calculateOptimalFontSize(...)
    // fontSize.coerceIn(minFontSize, 20f)  // –¢–µ–ø–µ—Ä—å –Ω–µ –≤—ã–π–¥–µ—Ç –∑–∞ –º–∏–Ω–∏–º—É–º!
}
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π 2 –∏ 3:

1. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç `maxCharsByScreenWidth` –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ fontSize
2. –£–º–µ–Ω—å—à–∏—Ç—å –º–∏–Ω–∏–º—É–º fontSize –¥–æ 1.5sp
3. –£–±—Ä–∞—Ç—å –∂–µ—Å—Ç–∫–æ–µ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 2.5f

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```
–≠–∫—Ä–∞–Ω 360dp, CELL = 0:
‚îú‚îÄ charsPerRow = 60
‚îú‚îÄ fontSize = ~9.7sp
‚îú‚îÄ realWidth = 60 √ó 9.7 √ó 0.56 = 326dp
‚îî‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: 90.5% ‚úÖ

–≠–∫—Ä–∞–Ω 360dp, CELL = 50:
‚îú‚îÄ charsPerRow = 180
‚îú‚îÄ fontSize = ~3.2sp
‚îú‚îÄ realWidth = 180 √ó 3.2 √ó 0.56 = 323dp
‚îî‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: 89.7% ‚úÖ

–≠–∫—Ä–∞–Ω 360dp, CELL = 100:
‚îú‚îÄ charsPerRow = 300
‚îú‚îÄ fontSize = ~2.1sp (–±—ã–ª–æ 2sp –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ!)
‚îú‚îÄ realWidth = 300 √ó 2.1 √ó 0.56 = 353dp
‚îî‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: 98% ‚úÖ‚úÖ‚úÖ
```

---

**–í—ã–≤–æ–¥:** –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ fontSize, –∞ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ 2.5f.

